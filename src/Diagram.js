
export default function Diagram ({ real_time, statistics, coils }) {

   return (
      <svg
         version="1.1"
         viewBox="0 0 198.62173 119.68884"
         height="119.68884mm"
         width="198.62173mm">
         <defs
            id="defs864">
            <marker
               orient="auto"
               refY="0"
               refX="0"
               id="marker2034"
               style={{overflow:"visible"}}>
               <path
                  id="path2032"
                  style={{fill:"#000000", fillOpacity:1, fillRule:"evenodd", stroke:"#000000", strokeWidth:0.625, strokeLinejoin:"round", strokeOpacity:1}}
                  d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z"
                  transform="matrix(-0.3,0,0,-0.3,0.69,0)" />
            </marker>
            <marker
               style={{overflow:"visible"}}
               id="marker1858"
               refX="0"
               refY="0"
               orient="auto">
               <path
                  transform="matrix(-0.3,0,0,-0.3,0.69,0)"
                  d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z"
                  style={{fill:"#000000", fillOpacity:1, fillRule:"evenodd", stroke:"#000000", strokeWidth:0.625, strokeLinejoin:"round", strokeOpacity:1}}
                  id="path1856" />
            </marker>
            <marker
               style={{overflow:"visible"}}
               id="Arrow2Send"
               refX="0"
               refY="0"
               orient="auto">
               <path
                  transform="matrix(-0.3,0,0,-0.3,0.69,0)"
                  d="M 8.7185878,4.0337352 -2.2072895,0.01601326 8.7185884,-4.0017078 c -1.7454984,2.3720609 -1.7354408,5.6174519 -6e-7,8.035443 z"
                  style={{fill:"#000000", fillOpacity:1, fillRule:"evenodd", stroke:"#000000", strokeWidth:0.625, strokeLinejoin:"round", strokeOpacity:1}}
                  id="path1537" />
            </marker>
            <marker
               style={{overflow:"visible"}}
               id="Arrow1Mend"
               refX="0"
               refY="0"
               orient="auto">
               <path
                  transform="matrix(-0.4,0,0,-0.4,-4,0)"
                  style={{fill:"#000000", fillOpacity:1, fillRule:"evenodd", stroke:"#000000", strokeWidth:"1pt", strokeOpacity:1}}
                  d="M 0,0 5,-5 -12.5,0 5,5 Z"
                  id="path1513" />
            </marker>
         </defs>
         <g
            transform="translate(14.737404,-5.7141349)"
            id="layer1">
            <g
               id="g851"
               transform="matrix(0.31866554,0,0.12234958,0.31866554,-10.028659,21.879474)">
               <rect
                  style={{fill:"#000022", fillOpacity:0.650602, stroke:"#000000", strokeWidth:1, strokeLinejoin:"bevel", strokeOpacity:0.710843}}
                  id="rect853"
                  width="71.815475"
                  height="52.160713"
                  x="34.669708"
                  y="35.983341" />
               <rect
                  y="26.458332"
                  x="43.089287"
                  height="52.160713"
                  width="71.815475"
                  id="rect833"
                  style={{fill:"#0000ff", fillOpacity:1, stroke:"#ffff00", strokeWidth:3, strokeLinejoin:"bevel", strokeMiterlimit:4, strokeOpacity:1 }} />
               <path
                  id="path835"
                  d="M 60.854166,26.458333 V 78.619047"
                  style={{fill:"none", stroke:"#ffff00", strokeWidth:3, strokeLinecap:"butt", strokeLinejoin:"miter", strokeMiterlimit:4, strokeOpacity:1 }} />
               <path
                  id="path837"
                  d="M 79.22381,26.080357 V 78.430058"
                  style={{fill:"none", stroke:"#ffff00", strokeWidth:3, strokeLinecap:"butt", strokeLinejoin:"miter", strokeMiterlimit:4, strokeOpacity:1 }} />
               <path
                  id="path839"
                  d="m 97.782441,27.025298 v 51.40476"
                  style={{fill:"none", stroke:"#ffff00", strokeWidth:3, strokeLinecap:"butt", strokeLinejoin:"miter", strokeMiterlimit:4, strokeOpacity:1 }} />
               <path
                  id="path841"
                  d="M 42.522322,45.735118 H 114.90476"
                  style={{fill:"none", stroke:"#ffff00", strokeWidth:3, strokeLinecap:"butt", strokeLinejoin:"miter", strokeMiterlimit:4, strokeOpacity:1 }} />
               <path
                  id="path843"
                  d="M 43.278274,62.555057 H 115.09375"
                  style={{fill:"none", stroke:"#ffff00", strokeWidth:3, strokeLinecap:"butt", strokeLinejoin:"miter", strokeMiterlimit:4, strokeOpacity:1 }} />
            </g>
            <g
               transform="matrix(0.77114046,0,0,0.77114046,42.075477,6.2619446)"
               id="g1475">
               <rect
                  style={{fill:"#cccccc", fillOpacity:0.650602, stroke:"#000000", strokeWidth:1.56054, strokeLinejoin:"bevel", strokeOpacity:0.710843}}
                  id="rect1469"
                  width="36.425434"
                  height="19.881058"
                  x="45.123528"
                  y="31.887152" />
               <rect
                  style={{fill:"#008000", fillOpacity:1, stroke:"none", strokeWidth:1.56054, strokeLinejoin:"bevel", strokeOpacity:0.710843}}
                  id="rect1471"
                  width="22.383568"
                  height="2.2244539"
                  x="50.128551"
                  y="47.319302" />
               <circle
                  style={{fill:"#0000ff", fillOpacity:1, stroke:"none", strokeWidth:2.10223, strokeLinejoin:"bevel", strokeOpacity:0.710843}}
                  id="path1477"
                  cx="73.973289"
                  cy="40.649517"
                  r="0.86080849" />
               <circle
                  r="1.0394346"
                  cy="37.426357"
                  cx="52.418285"
                  id="path1494"
                  style={{fill:"#00ff00", fillOpacity:1, stroke:"none", strokeWidth:3, strokeLinejoin:"bevel", strokeOpacity:0.710843 }} />
               <circle
                  style={{fill:"#00ff00", fillOpacity:1, stroke:"none", strokeWidth:3, strokeLinejoin:"bevel", strokeOpacity:0.710843}}
                  id="circle1496"
                  cx="55.593288"
                  cy="37.426357"
                  r="1.0394346" />
            </g>
            <path
               id="path1502"
               d="m 38.837052,41.057663 h 29.05692"
               style={{fill:"none", stroke:"#000000", strokeWidth:3, strokeLinecap:"butt", strokeLinejoin:"miter", strokeMiterlimit:4, strokeOpacity:1, markerEnd:"url(#Arrow2Send)" }} />
            <path
               id="path1854"
               d="m 108.68714,41.057663 h 29.05709"
               style={{fill:"none", stroke:"#000000", strokeWidth:3, strokeLinecap:"butt", strokeLinejoin:"miter", strokeMiterlimit:4, strokeOpacity:1, markerEnd:"url(#marker1858)" }} />
            <g
               id="g2008">
               <ellipse
                  style={{fill:coils.manual_control_load?"#ffff00":"#ffffff",fillOpacity:1,stroke:"#000000",strokeWidth:0.499999,strokeLinejoin:"bevel",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1}}
                  id="path2164"
                  cx="155.47987"
                  cy="33.777435"
                  rx="7.7174077"
                  ry="7.1494594" />
               <path
                  id="rect1966"
                  style={{fill:"none", fillOpacity:1, stroke:"#000000", strokeWidth:2.12367, strokeLinejoin:"bevel", strokeMiterlimit:4, strokeOpacity:1}}
                  d="m 155.45614,26.77597 c -4.06065,0.0045 -7.35004,3.297649 -7.34989,7.358303 0.34178,2.746574 1.2837,3.749443 3.17324,5.821567 l 0.83496,1.087884 v 8.797772 h 6.24367 v -8.797772 l 1.2442,-1.182482 c 1.76403,-1.930339 3.22014,-2.638792 3.22017,-5.726969 1.4e-4,-4.063795 -3.29414,-7.358246 -7.35794,-7.358303 z" />
               <path
                  style={{fill:"none", stroke:"#000000", strokeWidth:0.849467, strokeLinecap:"butt", strokeLinejoin:"miter", strokeMiterlimit:4, strokeOpacity:1}}
                  d="m 152.52123,48.047502 5.66951,-1.519139"
                  id="path1972" />
               <path
                  id="path1974"
                  d="m 152.52123,46.174545 5.66951,-1.51914"
                  style={{fill:"none", stroke:"#000000", strokeWidth:0.849467, strokeLinecap:"butt", strokeLinejoin:"miter", strokeMiterlimit:4, strokeOpacity:1 }} />
               <path
                  style={{fill:"none", stroke:"#000000", strokeWidth:0.849467, strokeLinecap:"butt", strokeLinejoin:"miter", strokeMiterlimit:4, strokeOpacity:1}}
                  d="m 152.52123,44.301588 5.66951,-1.51914"
                  id="path1976" />
               <path
                  id="path1978"
                  d="m 152.52123,42.803222 5.66951,-1.519139"
                  style={{fill:"none", stroke:"#000000", strokeWidth:0.849467, strokeLinecap:"butt", strokeLinejoin:"miter", strokeMiterlimit:4, strokeOpacity:1 }} />
               <path
                  style={{fill:"none", stroke:"#000000", strokeWidth:"0.264583px", strokeLinecap:"butt", strokeLinejoin:"miter", strokeOpacity:1}}
                  d="m 153.14177,40.986794 -1.74859,-6.525845"
                  id="path1989" />
               <path
                  id="path1991"
                  d="m 157.63907,40.983903 1.90489,-6.520063"
                  style={{fill:"none", stroke:"#000000", strokeWidth:"0.276033px", strokeLinecap:"butt", strokeLinejoin:"miter", strokeOpacity:1 }} />
               <path
                  style={{fill:"none", stroke:"#000000", strokeWidth:"0.264583px", strokeLinecap:"butt", strokeLinejoin:"miter", strokeOpacity:1}}
                  d="m 151.39318,34.460949 c 0.0269,0.0019 0.0831,0.03265 0.0808,0.0058 -0.009,-0.103537 -0.21863,-0.32611 -0.23623,-0.519718 -0.0437,-0.480695 0.28696,-0.979403 0.73233,-1.157553 0.16652,-0.06661 0.41154,-0.0768 0.59058,-0.118117 0.22704,-0.05239 0.23755,-0.04667 0.44885,0.04725 0.0161,0.0071 0.0364,0.0097 0.0472,0.02363 0.31116,0.400066 0.4665,0.869908 0.51972,1.370163 0.0208,0.195916 0.0176,0.393661 0.0236,0.59059 0.001,0.04438 -0.0176,0.342442 -0.0709,0.377976 -0.2052,0.136803 -0.35581,-0.169733 -0.4016,-0.307107 -0.0609,-0.182737 -0.0473,-0.219295 -0.0473,-0.401598 0,-0.715293 0.34032,-1.019236 0.99219,-1.252048 0.16463,-0.0588 0.39431,-0.120203 0.56697,-0.07087 0.19858,0.05674 0.39533,0.177427 0.47247,0.377976 0.0893,0.232108 0.28216,1.407433 -0.28349,1.181174 -0.1377,-0.05508 -0.14822,-0.108212 -0.23623,-0.236233 -0.0482,-0.07019 -0.11116,-0.133115 -0.14174,-0.212614 -0.14953,-0.388776 -0.12388,-0.772245 0.0709,-1.133927 0.052,-0.09654 0.19889,-0.156218 0.28348,-0.212612 0.0328,-0.02185 0.0587,-0.05458 0.0945,-0.07087 0.11109,-0.0505 0.3103,-0.06482 0.42522,-0.07087 0.32525,-0.01712 0.17359,0.01061 0.42522,0.0945 0.0454,0.01513 0.0989,0.0021 0.14174,0.02363 0.22137,0.110683 0.48377,0.565936 0.59059,0.779576 0.0925,0.185005 0.0954,0.421405 0.0472,0.614212 -0.004,0.01527 0.009,0.03414 0,0.04725 -0.01,0.01466 -0.0322,0.01458 -0.0472,0.02363 -0.1349,0.08094 -0.32762,0.07554 -0.42522,-0.07087 -0.37453,-0.561795 -0.29596,-0.996498 0.18899,-1.441035 0.33777,-0.309626 1.21658,-0.370134 1.5119,0.02363 0.25143,0.335241 0.29806,1.076624 0.0709,1.41741 -0.0157,0.02363 -0.0508,0.02717 -0.0709,0.04725 -0.0356,0.03565 -0.0558,0.08584 -0.0945,0.118118 -0.0121,0.01008 -0.032,-0.0038 -0.0473,0 -0.0275,0.0069 -0.0425,0.04725 -0.0709,0.04725 -0.18668,0 -0.21349,-0.315267 -0.25986,-0.496094 -0.19337,-0.754158 0.29317,-1.617721 1.06306,-1.795386 0.20128,-0.04645 0.6685,-0.06735 0.85044,0.02363 0.16697,0.08349 0.20083,0.318998 0.25986,0.496094 0.0149,0.04482 -0.008,0.09526 0,0.141743 0.008,0.04172 0.0412,0.07614 0.0472,0.118118 0.0216,0.151484 0.007,0.31868 0.0236,0.472469 0.0183,0.173881 0.06,0.345215 0.0709,0.519718 0.0147,0.235588 -0.007,0.474324 -0.0236,0.708705 -0.004,0.05338 -0.0211,0.08952 -0.0473,0.14174 -0.005,0.01 -0.0242,0.03474 -0.0236,0.02363 0.005,-0.09614 0.0253,-0.190897 0.038,-0.286345"
                  id="path1993" />
            </g>
            <g
               id="g2096">
               <rect
                  style={{fill:"#999999", fillOpacity:1, stroke:"#000000", strokeWidth:0.324797, strokeLinejoin:"bevel", strokeMiterlimit:4, strokeOpacity:1}}
                  id="rect2016"
                  width="30.08753"
                  height="17.698545"
                  x="75.872856"
                  y="87.574364" />
               <rect
                  style={{fill:"#000000", fillOpacity:1, stroke:"#000000", strokeWidth:0.499999, strokeLinejoin:"bevel", strokeMiterlimit:4, strokeOpacity:1}}
                  id="rect2018"
                  width="2.4218242"
                  height="3.102962"
                  x="77.078239"
                  y="84.314514" />
               <rect
                  y="84.314514"
                  x="77.078239"
                  height="3.102962"
                  width="2.4218242"
                  id="rect2020"
                  style={{fill:"#000000", fillOpacity:1, stroke:"#000000", strokeWidth:0.499999, strokeLinejoin:"bevel", strokeMiterlimit:4, strokeOpacity:1 }} />
               <rect
                  style={{fill:"#000000", fillOpacity:1, stroke:"#000000", strokeWidth:0.499999, strokeLinejoin:"bevel", strokeMiterlimit:4, strokeOpacity:1}}
                  id="rect2022"
                  width="2.4218242"
                  height="3.102962"
                  x="101.65979"
                  y="84.314514" />
               <rect
                  style={{fill:"#ffffff",fillOpacity:1,stroke:"#000000",strokeWidth:0.499999,strokeLinejoin:"bevel",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1}}
                  id="rect2185"
                  width="26.326048"
                  height="13.76438"
                  x="77.871483"
                  y="89.636765" />
               <rect
                  style={{fill:"#00ff00",fillOpacity:1,stroke:"none",strokeWidth:0.702073,strokeLinejoin:"bevel",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1}}
                  id="rect2187"
                  width={real_time.battery_soc * 0.25896791}
                  height="13.418155"
                  x="78.094894"
                  y="89.719345" />
               <rect
                  y="89.636765"
                  x="77.871483"
                  height="13.76438"
                  width="26.326048"
                  id="rect2189"
                  style={{fill:"none",fillOpacity:1,stroke:"#000000",strokeWidth:0.499999,strokeLinejoin:"bevel",strokeMiterlimit:4,strokeDasharray:"none",strokeOpacity:1}} />

            </g>
            <path
               style={{fill:"none", stroke:"#000000", strokeWidth:3, strokeLinecap:"butt", strokeLinejoin:"miter", strokeMiterlimit:4, strokeOpacity:1, markerEnd:"url(#marker2034)" }}
               d={statistics.net_battery_current<0?"m 90.902205,82.538248 v -29.05692":"m 90.902205,49.481328 v 29.05692"}
               id="path2030" />
            <text
               id="text2100"
               y="33.715477"
               x="43.845238"
               style={{fontSize:"9px", lineHeight:1.25, fontFamily:"Algerian", fill:"#000000", fillOpacity:1, stroke:"none", strokeWidth:0.264583}}
               ><tspan
                  style={{strokeWidth:0.264583}}
                  y="33.715477"
                  x="43.845238"
                  id="tspan2098">{ real_time.pv_power } W</tspan></text>
            <text
               style={{fontSize:"9px", lineHeight:1.25, fontFamily:"Algerian", fill:"#000000", fillOpacity:1, stroke:"none", strokeWidth:0.264583}}
               x="114.14881"
               y="33.715477"
               id="text2104"><tspan
                  id="tspan2102"
                  x="114.14881"
                  y="33.715477"
                  style={{strokeWidth:0.264583}}>{ real_time.load_power } W</tspan></text>
            <text
               id="text2108"
               y="67.279762"
               x="101.29762"
               style={{fontSize:"9px", lineHeight:1.25, fontFamily:"Algerian", fill:"#000000", fillOpacity:1, stroke:"none", strokeWidth:0.264583}}
               ><tspan
                  style={{strokeWidth:0.264583}}
                  y="67.279762"
                  x="101.29762"
                  id="tspan2106">{ trimNumber(statistics.net_battery_current < 0 ? Math.abs(real_time.battery_voltage * statistics.net_battery_current) : real_time.battery_charging_power) } W</tspan></text>
         </g>
      </svg>
   );
}

function trimNumber (n, places = 2) {
   if (n === 0) return "0";
   return n.toFixed(places).replace(/[.0]+$/, "");
}